# HFT Optimization - Kernel Parameters
# Network Stack Optimizations
net.core.rmem_max = 134217728
net.core.wmem_max = 134217728
net.core.rmem_default = 16777216
net.core.wmem_default = 16777216
net.ipv4.tcp_rmem = 4096 87380 134217728
net.ipv4.tcp_wmem = 4096 65536 134217728
net.core.netdev_max_backlog = 300000
net.core.netdev_budget = 600
net.core.netdev_budget_usecs = 8000
net.ipv4.tcp_timestamps = 0
net.ipv4.tcp_sack = 0
net.ipv4.tcp_low_latency = 1
net.ipv4.tcp_no_metrics_save = 1

# Disable TCP slow start after idle
net.ipv4.tcp_slow_start_after_idle = 0

# Fast socket recycling
net.ipv4.tcp_tw_reuse = 1

# Connection tracking
net.netfilter.nf_conntrack_max = 1048576

# Memory Management
vm.swappiness = 0
vm.min_free_kbytes = 1048576
vm.zone_reclaim_mode = 0

# Reduce context switching
kernel.sched_autogroup_enabled = 0

# Real-time scheduling
kernel.sched_rt_runtime_us = -1

# Increase max locked memory
vm.max_map_count = 262144
